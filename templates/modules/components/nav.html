<!--
 * @Author: Alkaid(AlkaidMegrez@outlook.com)
 * @Date: 2023-07-04 02:11:35
 * @LastEditors: Alkaid(AlkaidMegrez@outlook.com)
 * @LastEditTime: 2023-07-11 01:37:46
 * @FilePath: /theme-crux/templates/modules/components/nav.html
 * @Description: 
 * 
 * Copyright (c) 2023 by Crux, All Rights Reserved. 
-->

<div th:if="${theme.config.global.health_check}" th:fragment="components-nav" id="components-nav"
    class="w-screen fixed z-50 bg-black/10  backdrop-blur-lg ">
    <div class="w-full">
        <div class="w-full flex justify-between items-center p-4 px-4">
            <div class="flex justify-start items-start gap-2">
                <div class="h-8 w-8 p-0.5 rounded-lg bg-white flex items-center justify-center">
                    <div th:text="${theme.config.nav.emoji}"></div>
                </div>
                <div class="text-xl text-black font-bold">ÂèØÁî®ÊÄßÊ£ÄÊµã</div>
            </div>
            <div class="flex items-center space-x-2">
                <div th:if="${pluginFinder.available('PluginSearchWidget')}">
                    <!-- search mod widget, use ${pluginFinder.available('PluginSearchWidget')} to check if plugin is available -->
                    <a href="javascript:SearchWidget.open()" title="ÊêúÁ¥¢">
                        <div class="i-tabler-search"></div>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
<div th:unless="${theme.config.global.health_check}" th:fragment="components-nav" id="components-nav"
    class="w-screen fixed z-50 bg-white/30  backdrop-blur-lg ">
    <div class="w-full">
        <div class="w-full flex justify-between items-center p-4 px-4">
            <div class="flex justify-start items-start gap-2">
                <div th:unless="${theme.config.nav.emoji.isEmpty()}"
                    class="h-8 w-8 p-0.5 rounded-lg bg-white flex items-center justify-center">
                    <div th:text="${theme.config.nav.emoji}"></div>
                </div>
                <div th:unless="${theme.config.nav.title.isEmpty()}" class="text-xl text-black font-bold"
                    th:text="${theme.config.nav.title}"></div>
                <div th:if="${theme.config.nav.title.isEmpty()}" class="text-xl text-black font-bold"
                    th:text="${site.title}"></div>
            </div>
            <div class="flex items-center space-x-2">
                <div class="w-8 h-8 p-1.5 hover:bg-white transition duration-700 border rounded-lg flex items-center justify-center"
                    th:if="${pluginFinder.available('PluginSearchWidget')}">
                    <!-- search mod widget, use ${pluginFinder.available('PluginSearchWidget')} to check if plugin is available -->
                    <a class="!w-full !h-full i-heroicons-magnifying-glass" href="javascript:SearchWidget.open()"
                        title="ÊêúÁ¥¢">
                        <div class="i-tabler-search"></div>
                    </a>
                </div>

                <div th:unless="${theme.config.nav.submenu.isEmpty()}" x-data="dropdown"
                    th:with="menuItems = ${menuFinder.getByName(theme.config.nav.submenu).menuItems}"
                    class="relative inline-block text-left">
                    <!-- SubMenu dropdown buttom -->
                    <div x-on:click="show = !show"
                        class="w-8 h-8 p-1.5 hover:bg-white transition duration-700 border rounded-lg flex items-center justify-center">
                        <div class="!w-full !h-full i-heroicons-bars-3"></div>
                    </div>
                    <!-- SubMenu dropdown -->
                    <div x-show="show" @click.outside="show = false"
                        class="absolute right-0 z-10 mt-2 w-56 origin-top-right divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"
                        x-transition:enter="transition ease-out duration-100"
                        x-transition:enter-start="transform opacity-0 scale-95"
                        x-transition:enter-end="transform opacity-100 scale-100"
                        x-transition:leave="transition ease-in duration-75"
                        x-transition:leave-start="transform opacity-100 scale-100"
                        x-transition:leave-end="transform opacity-0 scale-95">
                        <div th:each="menuItem : ${menuItems}" class="py-1" role="none">
                            <a  th:href="${menuItem.status.href}"
                                th:text="${menuItem.status.displayName}"
                                class="text-gray-700 block px-4 py-2 text-sm" role="menuitem" tabindex="-1"
                                id="menu-item-0"></a>
                        </div>

                    </div>
                </div>
                <div x-data="dropdown" th:with="currentUser = ${contributorFinder.getContributor(#authentication.name)}"
                    class="relative inline-block text-left">
                    <!-- Personal dropdown buttom -->
                    <div x-on:click="show = !show" th:if="${currentUser.name == 'anonymousUser'}"
                        class="w-8 h-8 p-1.5 hover:bg-white transition duration-700 border rounded-lg flex items-center justify-center">
                        <div class="!w-full !h-full i-heroicons-user"></div>
                    </div>

                    <div x-on:click="show = !show" th:unless="${currentUser.name == 'anonymousUser'}"
                        class="w-8 h-8 border rounded-lg flex items-center justify-center">
                        <img class="w-full h-full rounded-lg" th:src="${currentUser.avatar}" />
                    </div>
                    <!-- Personal dropdown -->
                    <div x-show="show" @click.outside="show = false"
                        class="absolute right-0 z-10 mt-2 w-56 origin-top-right divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"
                        x-transition:enter="transition ease-out duration-100"
                        x-transition:enter-start="transform opacity-0 scale-95"
                        x-transition:enter-end="transform opacity-100 scale-100"
                        x-transition:leave="transition ease-in duration-75"
                        x-transition:leave-start="transform opacity-100 scale-100"
                        x-transition:leave-end="transform opacity-0 scale-95">

                        <div class="py-1" role="none">
                            <div class="text-black block px-4 py-2 text-sm">
                                <p>Hiüëã</p>
                                <p th:unless="${currentUser.name == 'anonymousUser'}"
                                    th:text="${currentUser.displayName}"></p>
                            </div>
                        </div>
                        <div th:unless="${currentUser.name == 'anonymousUser'}" class="py-1" role="none">
                            <a href="/console" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem"
                                tabindex="-1" id="menu-item-0">ÊéßÂà∂Âè∞</a>
                        </div>
                        <div th:unless="${currentUser.name == 'anonymousUser'}" class="py-1" role="none">
                            <a href="/logout" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem"
                                tabindex="-1" id="menu-item-6">ÁôªÂá∫</a>
                        </div>
                        <div th:if="${currentUser.name == 'anonymousUser'}" class="py-1" role="none">
                            <a href="/console/login" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem"
                                tabindex="-1" id="menu-item-6">ÁôªÂΩï</a>
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </div>
    <div class="w-full border-t p-4 px-4"><!-- nav links -->
        <div class="w-full flex justify-start items-center space-x-4 overflow-auto">
            <div th:each="menuItem : ${menuFinder.getByName(theme.config.nav.menu).menuItems}">
                <!-- usual use ${menuFinder.getByName(theme.config.nav.menu).menuItems} to get menu items -->
                <a class="text-black font-semibold text-sm text-gray-500 hover:shadow-2xl hover:text-blue-700 transition duration-700 break-keep whitespace-nowrap"
                    th:href="@{${menuItem.status.href}}" th:text="@{${menuItem.status.displayName}}"></a>
            </div>
        </div>
    </div>
</div>