<!--
 * @Author: Alkaid(AlkaidMegrez@outlook.com)
 * @Date: 2023-07-04 14:27:54
 * @LastEditors: Alkaid(AlkaidMegrez@outlook.com)
 * @LastEditTime: 2023-07-07 13:49:04
 * @FilePath: /theme-crux/templates/moments.html
 * @Description: 
 * 
 * Copyright (c) 2023 by Crux, All Rights Reserved. 
-->
<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org" th:replace="modules/layout :: html(content = ~{::content})">
<th:block th:fragment="content">
    <div class="grid grid-cols-10 gap-4">
        <div class="col-span-10 w-full h-36 bg-center bg-cover rounded-lg flex items-end"
            th:style="'background-image:url(' + ${theme.config.index.hero} + ')'">
            <div class="w-full h-36 rounded-lg bg-white/30 backdrop-blur-lg backdrop-brightness-95 flex items-center">
                <div class="p-4 px-8 space-y-4">
                    <div class="text-4xl text-white font-bold" th:text="${theme.config.moments.moment_title}">
                    </div>
                    <div class="text-2xl font-serif italic text-gray-200 font-bold"
                        th:text="${theme.config.moments.moment_subtitle}">
                    </div>
                </div>
            </div>
        </div>
        
        <div th:if="${moments.items.size() == 0}" class="col-span-10 md:col-span-7">
            <div class="bg-white h-32 p-4 rounded-lg flex items-center justify-center">
                <div class="space-y-2">
                    <div class="text-md font-serif italic font-bold">oops!</div>
                    <div class="text-sm font-bold">期待您的第一条Moments</div>
                </div>
            </div>
        </div>
        <div th:unless="${moments.items.size() == 0}" class="col-span-10 md:col-span-7">
            <div class="bg-white rounded-lg">
                <th:block>
                    <div class="space-y-2" th:each="moment : ${moments.items}"
                        th:with="content = ${moment.spec.content}">
                        <div class="p-4 space-y-2">
                            <div class="flex gap-1">
                                <div class="bg-center bg-cover h-6 w-6 rounded-lg"
                                    th:style="'background-image:url(' + ${moment.owner.avatar} + ')'"></div>
                                <div class="text-sm font-bold text-gray-800" th:text="${moment.owner.name}"></div>
                            </div>
                            <div class="text-xs  text-gray-500"
                                th:text="${#dates.format(moment.spec.releaseTime,'yyyy-MM-dd HH:mm')}"></div>
                            <div class="text-sm font-bold text-gray-700" th:if="${not #strings.isEmpty(content.html)}"
                                th:utext="${content.html}"></div>

                        </div>
                        <th:block class="space-y-2" th:if="${not #lists.isEmpty(content.medium)}"
                            th:each="momentItem : ${content.medium}">
                            <img th:if="${momentItem.type.name == 'PHOTO'}" th:src="${momentItem.url}" />
                            <video th:if="${momentItem.type.name == 'VIDEO'}" th:src="${momentItem.url}"></video>
                        </th:block>
                    </div>
                </th:block>
            </div>
        </div>
        <div class="col-span-10 md:col-span-3">
            <div class="bg-white rounded-lg p-4 space-y-2">
                <div class="flex items-start gap-4">
                    <div class="h-12 w-12 rounded-lg bg-center bg-cover"
                        th:style="'background-image:url(' + ${theme.config.moments.avatar} + ')'"></div>
                    <div class="space-y-2 shrink max-w-lg">
                        <div class="text-lg font-bold" th:text="${theme.config.moments.name}"></div>
                    </div>
                </div>
                <div class="text-xs font-bold text-gray-500" th:text="${theme.config.moments.signature}" />
                <th:block th:replace="modules/components/social :: social(socials=${theme.config.moments.socials})">
                </th:block>
            </div>
        </div>
    </div>
</th:block>

</html>