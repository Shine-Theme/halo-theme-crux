<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org"
  th:replace="modules/layout :: html(content = ~{::content})">
<th:block th:fragment="content">
  <div class="grid grid-cols-10 gap-4">
    
    <div class="col-span-10 md:hidden toc-container-mobile p-4 rounded-lg bg-white space-y-2">
      <div class="text-md text-gray-700 font-bold">文章目录</div>
      <div class="border-t"></div>
      <div class="toc-mobile flex justify-start items-start space-x-4">
      </div>
    </div>
    <div class="col-span-10 md:col-span-7">
      <div class="md:hidden rounded-lg">
        <img class="w-full rounded-lg" th:if="${not #strings.isEmpty(singlePage.spec.cover)}"
          th:src="${singlePage.spec.cover}"></img>
      </div>
      <div class="bg-white rounded-lg ">
        <div th:if="${singlePage.spec.cover.isEmpty}" class="w-full h-96 bg-cover bg-center rounded-t-lg flex"
          th:style="'background-image:url(' + ${singlePage.spec.cover.isEmpty} + ')'">
          <div
            class="rounded-t-lg w-full h-full backdrop-blur-lg backdrop-brightness-110 backdrop-saturate-50 relative">
            <div class="space-y-2 p-4 md:p-8 absolute bottom-0 text-white">
              <div class="font-bold text-4xl hover:text-blue-700 transition duration-700" th:text="${singlePage.spec.title}">
              </div>
              <div class="flex space-x-6">
                <div class="flex space-x-2">
                  <div th:if="${singlePage.owner.avatar}" class="w-4 h-4 rounded-lg bg-center bg-cover"
                    th:style="'background-image:url(' + ${singlePage.owner.avatar} + ')'">
                  </div>
                  <div th:unless="${singlePage.owner.avatar}" class="i-tabler-user"></div>
                  <div class="text-xs" th:text="${singlePage.owner.displayName}"></div>
                </div>
                <div class="flex space-x-2">
                  <div class="i-tabler-calendar"></div>
                  <div class="text-xs" th:text="${#dates.format(singlePage.status.lastModifyTime,'yyyy-MM-dd HH:mm')}"></div>
                </div>
              </div>
              <div class="flex space-x-6">
                <div class="flex space-x-2">
                  <div class="i-tabler-eye"></div>
                  <div class="text-xs">累计阅读<span class="mx-0.5" th:text="${singlePage.stats.visit}"></span>次</div>
                </div>

                <div class="flex space-x-2">
                  <div class="i-tabler-message"></div>
                  <div class="text-xs">评论<span class="mx-0.5" th:text="${singlePage.stats.comment}"></span>条</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div th:unless="${singlePage.spec.cover.isEmpty}" class="w-full h-96 bg-cover bg-center rounded-t-lg "
          th:style="'background-image:url(' + ${theme.config.global.default_cover} + ')'">
          <div
            class="rounded-t-lg w-full h-full backdrop-blur-lg backdrop-brightness-110 backdrop-saturate-50 relative">
            <div class="space-y-2  p-4 md:p-8 absolute bottom-0 text-white">
              <div class="font-bold text-4xl hover:text-blue-700 transition duration-700" th:text="${singlePage.spec.title}">
              </div>
              <div class="flex space-x-6">
                <div class="flex space-x-2">
                  <div th:if="${singlePage.owner.avatar}" class="w-4 h-4 rounded-lg bg-center bg-cover"
                    th:style="'background-image:url(' + ${singlePage.owner.avatar} + ')'">
                  </div>
                  <div th:unless="${singlePage.owner.avatar}" class="i-tabler-user"></div>
                  <div class="text-xs" th:text="${singlePage.owner.displayName}"></div>
                </div>
                <div class="flex space-x-2">
                  <div class="i-tabler-calendar"></div>
                  <div class="text-xs" th:text="${#dates.format(singlePage.status.lastModifyTime,'yyyy-MM-dd HH:mm')}"></div>
                </div>
              </div>
              <div class="flex space-x-6">
                <div class="flex space-x-2">
                  <div class="i-tabler-eye"></div>
                  <div class="text-xs">累计阅读<span class="mx-0.5" th:text="${singlePage.stats.visit}"></span>次</div>
                </div>

                <div class="flex space-x-2">
                  <div class="i-tabler-message"></div>
                  <div class="text-xs">评论<span class="mx-0.5" th:text="${singlePage.stats.comment}"></span>条</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <article
          class="prose !max-w-none p-4 md:p-8" id="content"
          th:classappend="${theme.config.singlePage.content_size} + ' ' + ${theme.config.singlePage.content_theme}">
          <th:block th:utext="${singlePage.content.content}"></th:block>
        </article>
        <div class="border-t m-4 my-0"></div>
        <div class="bg-white rounded-lg space-y-2">
          <div class="p-8">
            <div class="space-y-4 " th:if="${pluginFinder.available('PluginCommentWidget')}">
              <div class="text-xl font-bold">评论</div>
              <halo:comment group="content.halo.run" kind="singlePage" th:attr="name=${singlePage.metadata.name}"
                colorScheme="'light'" />
            </div>
          </div>
        </div>
      </div>

    </div>
    <div class="col-span-10 md:col-span-3 space-y-2">
      <div class="rounded-lg ">
        <img class="w-full rounded-lg" th:if="${singlePage.spec.cover.isEmpty}" th:src="${singlePage.spec.cover}"></img>
        <img class="w-full rounded-lg" th:unless="${singlePage.spec.cover.isEmpty}"
          th:src="${theme.config.global.default_cover}"></img>
      </div>

      <div class="hidden md:block toc-container p-4 rounded-lg bg-white space-y-2">
        <div class="text-md text-gray-700 font-bold">文章目录</div>
        <div class="border-t"></div>
        <div class="toc flex justify-start items-start space-x-4">
          <div class="space-y-1 dark:border-slate-500"></div>
          <div
            class="group flex items-center justify-between rounded py-1 px-1.5 transition-all hover:bg-gray-100 text-sm opacity-80 dark:hover:bg-slate-700 dark:text-slate-50">
          </div>
        </div>
      </div>
      <div class="toc-container hidden md:block w-full p-4 rounded-lg bg-white space-y-2">
        <div class="text-md text-gray-700 font-bold">文章目录</div>
        <div class="border-t"></div>
        <div class="toc"></div>
      </div>
    </div>
  </div>
  <script th:src="@{/assets/dist/main.iife.js?v={version}(version=${theme.spec.version})}"></script>
  <script>
    main.generateToc('content', 'toc-container', 'toc')
    main.generateToc('content', 'toc-container-mobile', 'toc-mobile')
  </script>
</th:block>

</html>